parameters:
- name: ptvsPackageVersion
  type: string
  default: $(Build.BuildNumber)

steps:

  # Build the product
  - task: MSBuild@1
    displayName: 'Build product'
    inputs:
      solution: $(Build.SourcesDirectory)/Python/Product/dirs.proj
      msbuildVersion: $(MsBuildVersion)
      platform: $(Platform)
      configuration: $(BuildConfiguration)
      msbuildArguments: ' /p:VSTarget=$(VSTarget) 
                          /p:BuildNumber=${{ parameters.ptvsPackageVersion }} 
                          /bl:$(Build.SourcesDirectory)\logs\BuildProduct.binlog'

  # Build the tests
  - task: MSBuild@1
    displayName: 'Build tests'
    inputs:
      solution: $(Build.SourcesDirectory)/Python/Tests/dirs.proj
      msbuildVersion: $(MsBuildVersion)
      platform: $(Platform)
      configuration: $(BuildConfiguration)
      msbuildArguments: ' /p:VSTarget=$(VSTarget) 
                          /p:BuildNumber=${{ parameters.ptvsPackageVersion }} 
                          /bl:$(Build.SourcesDirectory)\logs\BuildTests.binlog'
